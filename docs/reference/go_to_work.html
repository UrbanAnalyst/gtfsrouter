<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>go_to_work — go_to_work • gtfsrouter</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="go_to_work — go_to_work"><meta property="og:description" content="Use local environmental variables specifying home and work stations and
locations of locally-stored GTFS data to route from home to work location
with next available service."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gtfsrouter</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.5.165</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/UrbanAnalyst/gtfsrouter" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>go_to_work</h1>
    <small class="dont-index">Source: <a href="https://github.com/UrbanAnalyst/gtfsrouter/blob/HEAD/R/go_home_work.R" class="external-link"><code>R/go_home_work.R</code></a></small>
    <div class="hidden name"><code>go_to_work.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Use local environmental variables specifying home and work stations and
locations of locally-stored GTFS data to route from home to work location
with next available service.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">go_to_work</span><span class="op">(</span>wait <span class="op">=</span> <span class="fl">0</span>, <span class="va">start_time</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>wait</dt>
<dd><p>An integer specifying the n-th next service. That is, <code>wait = n</code>
will return the n-th available service after the next immediate service.</p></dd>


<dt>start_time</dt>
<dd><p>If given, search for connections after specified time; if
not given, search for connections from current time.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A <code>data.frame</code> specifying the next available route from work to home.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function, and the complementary function go_to_work,
requires three local environmental variables specifying the names of home and
work stations, and the location on local storage of the GTFS data set to be
used for routing. These are respectively called <code>gtfs_home</code>, <code>gtfs_work</code>, and
<code>gtfs_data</code>. This data set must also be pre-processed using the
<a href="process_gtfs_local.html">process_gtfs_local</a> function.</p>
<p>See <a href="https://rdrr.io/r/base/Startup.html" class="external-link">Startup</a> for details on how to set environmental variables.
Briefly, this can be done in two main ways: By setting them at the start of
each session, in which case the variables may be set with:
<code>Sys.setenv ("gtfs_home" = "&lt;my home station&gt;")</code>
<code>Sys.setenv ("gtfs_work" = "&lt;my work station&gt;")</code>
<code>Sys.setenv ("gtfs_data" = "/full/path/to/gtfs.zip")</code>
Alternatively, to set these automatically for each session, paste those lines
into the file <code>~/.Renviron</code> - that is, a file named ".Renviron" in the user's
home directory.</p>
<p>The <a href="process_gtfs_local.html">process_gtfs_local</a> function reduces the GTFS data set to the
minimal possible size necessary for local routing.  GTFS data are
nevertheless typically quite large, and both the <a href="go_home.html">go_home</a> and
go_to_work functions may take some time to execute. Most of this time
is devoted to loading the data in to the current workspace and as such is
largely unavoidable.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other additional: 
<code><a href="go_home.html">go_home</a>()</code>,
<code><a href="process_gtfs_local.html">process_gtfs_local</a>()</code>,
<code><a href="summary.gtfs.html">summary.gtfs</a>()</code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># For general use, please set these three variables:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span> <span class="op">(</span><span class="st">"gtfs_home"</span> <span class="op">=</span> <span class="st">"&lt;my home station&gt;"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span> <span class="op">(</span><span class="st">"gtfs_work"</span> <span class="op">=</span> <span class="st">"&lt;my work station&gt;"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span> <span class="op">(</span><span class="st">"gtfs_data"</span> <span class="op">=</span> <span class="st">"/full/path/to/gtfs.zip"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="co"># The following illustrate use with sample data bundled with package</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span> <span class="op">(</span><span class="st">"gtfs_home"</span> <span class="op">=</span> <span class="st">"Tempelhof"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span> <span class="op">(</span><span class="st">"gtfs_work"</span> <span class="op">=</span> <span class="st">"Alexanderplatz"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span> <span class="op">(</span><span class="st">"gtfs_data"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span> <span class="op">(</span><span class="op">)</span>, <span class="st">"vbb.zip"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="process_gtfs_local.html">process_gtfs_local</a></span> <span class="op">(</span><span class="op">)</span> <span class="co"># If not already done</span></span></span>
<span class="r-in"><span><span class="fu">go_to_work</span> <span class="op">(</span>start_time <span class="op">=</span> <span class="st">"12:00"</span><span class="op">)</span> <span class="co"># next available service after 12:00</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    route_name         trip_name                              stop_name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          U6       U Alt-Tegel                 S+U Tempelhof (Berlin)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          U6       U Alt-Tegel                  U Paradestr. (Berlin)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          U6       U Alt-Tegel        U Platz der Luftbrucke (Berlin)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          U6       U Alt-Tegel                 U Mehringdamm (Berlin)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5          U6       U Alt-Tegel              U Hallesches Tor (Berlin)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6          U6       U Alt-Tegel U Kochstr./Checkpoint Charlie (Berlin)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7          U6       U Alt-Tegel                  U Stadtmitte (Berlin)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8          U6       U Alt-Tegel           U Franzosische Str. (Berlin)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9          U6       U Alt-Tegel         S+U Friedrichstr. Bhf (Berlin)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10         S7 S Ahrensfelde Bhf         S+U Friedrichstr. Bhf (Berlin)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11         S7 S Ahrensfelde Bhf            S Hackescher Markt (Berlin)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12         S7 S Ahrensfelde Bhf        S+U Alexanderplatz Bhf (Berlin)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    arrival_time departure_time</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      12:02:30       12:02:30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      12:04:00       12:04:00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      12:05:30       12:05:30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      12:07:30       12:07:30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      12:09:00       12:09:00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      12:10:30       12:10:30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      12:12:00       12:12:00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      12:13:00       12:13:00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      12:14:30       12:14:30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10     12:20:36       12:21:24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     12:22:54       12:23:24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12     12:24:36       12:25:24</span>
<span class="r-in"><span><span class="fu">go_to_work</span> <span class="op">(</span><span class="fl">3</span>, start_time <span class="op">=</span> <span class="st">"12:00"</span><span class="op">)</span> <span class="co"># Wait until third service after that</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    route_name                         trip_name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         S45 S Flughafen Berlin-Schonefeld Bhf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         S45 S Flughafen Berlin-Schonefeld Bhf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          U8                  U Paracelsus-Bad</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          U8                  U Paracelsus-Bad</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5          U8                  U Paracelsus-Bad</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6          U8                  U Paracelsus-Bad</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7          U8                  U Paracelsus-Bad</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8          U8                  U Paracelsus-Bad</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9          U8                  U Paracelsus-Bad</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10         U8                  U Paracelsus-Bad</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11         U8                  U Paracelsus-Bad</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12         U8                  U Paracelsus-Bad</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                           stop_name arrival_time departure_time</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1            S+U Tempelhof (Berlin)     12:10:24       12:10:54</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          S+U Hermannstr. (Berlin)     12:14:12       12:14:42</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          S+U Hermannstr. (Berlin)     12:17:30       12:17:30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4              U Leinestr. (Berlin)     12:19:00       12:19:00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5             U Boddinstr. (Berlin)     12:20:30       12:20:30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6           U Hermannplatz (Berlin)     12:22:00       12:22:00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7          U Schonleinstr. (Berlin)     12:24:00       12:24:00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8         U Kottbusser Tor (Berlin)     12:26:00       12:26:00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9            U Moritzplatz (Berlin)     12:28:00       12:28:00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10   U Heinrich-Heine-Str. (Berlin)     12:29:30       12:29:30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     S+U Jannowitzbrucke (Berlin)     12:30:30       12:30:30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 S+U Alexanderplatz (Berlin) [U8]     12:32:30       12:32:30</span>
<span class="r-in"><span><span class="co"># Generally, `start_time` will not be specified, in which case `go_to_work`</span></span></span>
<span class="r-in"><span><span class="co"># will return next available service from current system time, so calls will</span></span></span>
<span class="r-in"><span><span class="co"># generally be as simple as:</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu">go_to_work</span> <span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">go_to_work</span> <span class="op">(</span><span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Mark Padgham, Marcin Stepniak.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

