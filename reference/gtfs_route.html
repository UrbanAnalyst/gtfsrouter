<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>gtfs_route — gtfs_route • gtfsrouter</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="gtfs_route — gtfs_route" />
<meta property="og:description" content="Calculate single route between a start and end station departing at or after
a specified time." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gtfsrouter</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.5.039</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ATFutures/gtfs-router">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>gtfs_route</h1>
    <small class="dont-index">Source: <a href='https://github.com/ATFutures/gtfs-router/blob/master/R/router.R'><code>R/router.R</code></a></small>
    <div class="hidden name"><code>gtfs_route.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Calculate single route between a start and end station departing at or after
a specified time.</p>
    </div>

    <pre class="usage"><span class='fu'>gtfs_route</span><span class='op'>(</span>
  <span class='va'>gtfs</span>,
  <span class='va'>from</span>,
  <span class='va'>to</span>,
  start_time <span class='op'>=</span> <span class='cn'>NULL</span>,
  day <span class='op'>=</span> <span class='cn'>NULL</span>,
  route_pattern <span class='op'>=</span> <span class='cn'>NULL</span>,
  earliest_arrival <span class='op'>=</span> <span class='cn'>TRUE</span>,
  include_ids <span class='op'>=</span> <span class='cn'>FALSE</span>,
  grep_fixed <span class='op'>=</span> <span class='cn'>TRUE</span>,
  max_transfers <span class='op'>=</span> <span class='cn'>NA</span>,
  from_to_are_ids <span class='op'>=</span> <span class='cn'>FALSE</span>,
  quiet <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>gtfs</th>
      <td><p>A set of GTFS data returned from <a href='extract_gtfs.html'>extract_gtfs</a> or, for more
efficient queries, pre-processed with <a href='gtfs_timetable.html'>gtfs_timetable</a>.</p></td>
    </tr>
    <tr>
      <th>from</th>
      <td><p>Names, IDs, or approximate (lon, lat) coordinates of start
stations (as <code>stop_name</code> or <code>stop_id</code> entry in the <code>stops</code> table, or a vector
of two numeric values). See Note.</p></td>
    </tr>
    <tr>
      <th>to</th>
      <td><p>Corresponding Names, IDs, or coordinates of end station.</p></td>
    </tr>
    <tr>
      <th>start_time</th>
      <td><p>Desired departure time at <code>from</code> station, either in seconds
after midnight, a vector of two or three integers (hours, minutes) or (hours,
minutes, seconds), an object of class <a href='https://rdrr.io/r/base/difftime.html'>difftime</a>, <span class="pkg">hms</span>, or
<span class="pkg">lubridate</span>. If not provided, current time is used.</p></td>
    </tr>
    <tr>
      <th>day</th>
      <td><p>Day of the week on which to calculate route, either as an
unambiguous string (so "tu" and "th" for Tuesday and Thursday), or a number
between 1 = Sunday and 7 = Saturday. If not given, the current day will be
used. (Not used if <code>gtfs</code> has already been prepared with
<a href='gtfs_timetable.html'>gtfs_timetable</a>.)</p></td>
    </tr>
    <tr>
      <th>route_pattern</th>
      <td><p>Using only those routes matching given pattern, for
example, "^U" for routes starting with "U" (as commonly used for underground
or subway routes. To negate the <code>route_pattern</code> -- that is, to include all
routes except those matching the pattern -- prepend the value with "!"; for
example "!^U" will include all services except those starting with "U". (This
parameter is not used at all if <code>gtfs</code> has already been prepared with
<a href='gtfs_timetable.html'>gtfs_timetable</a>.)</p></td>
    </tr>
    <tr>
      <th>earliest_arrival</th>
      <td><p>If <code>FALSE</code>, routing will be with the first-departing
service, which may not provide the earliest arrival at the <code>to</code> station. This
may nevertheless be useful for bulk queries, as earliest arrival searches
require two routing queries, while earliest departure searches require just
one, and so will be generally twice as fast.</p></td>
    </tr>
    <tr>
      <th>include_ids</th>
      <td><p>If <code>TRUE</code>, result will include columns containing
GTFS-specific identifiers for routes, trips, and stops.</p></td>
    </tr>
    <tr>
      <th>grep_fixed</th>
      <td><p>If <code>FALSE</code>, match station names (when passed as character
string) with <code><a href='https://rdrr.io/r/base/grep.html'>grep(..., fixed = FALSE)</a></code>, to allow use of <code>grep</code> expressions.
This is useful to refine matches in cases where desired stations may match
multiple entries.</p></td>
    </tr>
    <tr>
      <th>max_transfers</th>
      <td><p>If not <code>NA</code>, specify a desired maximum number of
transfers for the route (including but not exceeding this number). This
parameter may be used to generate alternative routes with fewer transfers,
although actual numbers of transfers may still exceed this number if a value
is specified which exceeds the minimal feasible number of transfers.</p></td>
    </tr>
    <tr>
      <th>from_to_are_ids</th>
      <td><p>Set to <code>TRUE</code> to enable <code>from</code> and <code>to</code> parameter to
specify entries in <code>stop_id</code> rather than <code>stop_name</code> column of the <code>stops</code>
table.</p></td>
    </tr>
    <tr>
      <th>quiet</th>
      <td><p>Set to <code>TRUE</code> to suppress screen messages (currently just
regarding timetable construction).</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>For single (from, to) values, a <code>data.frame</code> describing the route,
with each row representing one stop. For multiple (from, to) values, a list
of <code>data.frames</code>, each of which describes one route between the i'th start
and end stations (<code>from</code> and <code>to</code> values). Origin and destination stations
for which no route is possible return <code>NULL</code>.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>This function will by default calculate the route that arrives earliest
at the specified destination, although this may depart later than the
earliest departing service. Routes which depart at the earliest possible time
can be calculated by setting <code>earliest_arrival = FALSE</code>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='berlin_gtfs_to_zip.html'>berlin_gtfs_to_zip</a></span> <span class='op'>(</span><span class='op'>)</span> <span class='co'># Write sample feed from Berlin, Germany to tempdir</span>
</div><div class='output co'>#&gt; [1] "/tmp/RtmpviFCv1/vbb.zip"</div><div class='input'><span class='va'>f</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span> <span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span> <span class='op'>(</span><span class='op'>)</span>, <span class='st'>"vbb.zip"</span><span class='op'>)</span> <span class='co'># name of feed</span>
<span class='va'>gtfs</span> <span class='op'>&lt;-</span> <span class='fu'><a href='extract_gtfs.html'>extract_gtfs</a></span> <span class='op'>(</span><span class='va'>f</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>▶<span style='color: #00BB00;'> Unzipping GTFS archive</span></span></div><div class='output co'>#&gt; <span class='message'><span style='color: #00BB00;'>✔ Unzipped GTFS archive  </span></span></div><div class='output co'>#&gt; <span class='message'>▶<span style='color: #00BB00;'> Extracting GTFS feed</span></span></div><div class='output co'>#&gt; <span class='message'><span style='color: #00BB00;'>✔ Extracted GTFS feed </span></span></div><div class='output co'>#&gt; <span class='message'>▶<span style='color: #00BB00;'> Converting stop times to seconds</span></span></div><div class='output co'>#&gt; <span class='message'><span style='color: #00BB00;'>✔ Converted stop times to seconds </span></span></div><div class='output co'>#&gt; <span class='message'>▶<span style='color: #00BB00;'> Converting transfer times to seconds</span></span></div><div class='output co'>#&gt; <span class='message'><span style='color: #00BB00;'>✔ Converted transfer times to seconds </span></span></div><div class='input'><span class='va'>from</span> <span class='op'>&lt;-</span> <span class='st'>"Innsbrucker Platz"</span> <span class='co'># U-bahn station, not "S"</span>
<span class='va'>to</span> <span class='op'>&lt;-</span> <span class='st'>"Alexanderplatz"</span>
<span class='va'>start_time</span> <span class='op'>&lt;-</span> <span class='fl'>12</span> <span class='op'>*</span> <span class='fl'>3600</span> <span class='op'>+</span> <span class='fl'>120</span> <span class='co'># 12:02</span>
<span class='va'>route</span> <span class='op'>&lt;-</span> <span class='fu'>gtfs_route</span> <span class='op'>(</span><span class='va'>gtfs</span>, from <span class='op'>=</span> <span class='va'>from</span>, to <span class='op'>=</span> <span class='va'>to</span>, start_time <span class='op'>=</span> <span class='va'>start_time</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Day not specified; extracting timetable for wednesday</span></div><div class='input'>
<span class='co'># Specify day of week</span>
<span class='va'>route</span> <span class='op'>&lt;-</span> <span class='fu'>gtfs_route</span> <span class='op'>(</span><span class='va'>gtfs</span>, from <span class='op'>=</span> <span class='va'>from</span>, to <span class='op'>=</span> <span class='va'>to</span>, start_time <span class='op'>=</span> <span class='va'>start_time</span>,
                     day <span class='op'>=</span> <span class='st'>"Sunday"</span><span class='op'>)</span>

<span class='co'># specify travel by "U" = underground only</span>
<span class='va'>route</span> <span class='op'>&lt;-</span> <span class='fu'>gtfs_route</span> <span class='op'>(</span><span class='va'>gtfs</span>, from <span class='op'>=</span> <span class='va'>from</span>, to <span class='op'>=</span> <span class='va'>to</span>, start_time <span class='op'>=</span> <span class='va'>start_time</span>,
                     day <span class='op'>=</span> <span class='st'>"Sunday"</span>, route_pattern <span class='op'>=</span> <span class='st'>"^U"</span><span class='op'>)</span>
<span class='co'># specify travel by "S" = street-level only (not underground)</span>
<span class='va'>route</span> <span class='op'>&lt;-</span> <span class='fu'>gtfs_route</span> <span class='op'>(</span><span class='va'>gtfs</span>, from <span class='op'>=</span> <span class='va'>from</span>, to <span class='op'>=</span> <span class='va'>to</span>, start_time <span class='op'>=</span> <span class='va'>start_time</span>,
                     day <span class='op'>=</span> <span class='st'>"Sunday"</span>, route_pattern <span class='op'>=</span> <span class='st'>"^S"</span><span class='op'>)</span>

<span class='co'># Route queries are generally faster if the GTFS data are pre-processed with</span>
<span class='co'># `gtfs_timetable()`:</span>
<span class='va'>gt</span> <span class='op'>&lt;-</span> <span class='fu'><a href='gtfs_timetable.html'>gtfs_timetable</a></span> <span class='op'>(</span><span class='va'>gtfs</span>, day <span class='op'>=</span> <span class='st'>"Sunday"</span>, route_pattern <span class='op'>=</span> <span class='st'>"^S"</span><span class='op'>)</span>
<span class='va'>route</span> <span class='op'>&lt;-</span> <span class='fu'>gtfs_route</span> <span class='op'>(</span><span class='va'>gt</span>, from <span class='op'>=</span> <span class='va'>from</span>, to <span class='op'>=</span> <span class='va'>to</span>, start_time <span class='op'>=</span> <span class='va'>start_time</span><span class='op'>)</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Mark Padgham, Marcin Stepniak.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


